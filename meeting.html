<!DOCTYPE html>
<html lang="en" ng-app="mmh">
    <head ng-controller="meetingController">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
        <title>Socialivo</title>
        <meta property="og:description" content="{{meeting.name}}">
        <!-- CSS  -->
        <link href="newdesign/css/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"/>
        <link href="css/font-awesome.min.css" type="text/css" rel="stylesheet" media="screen,projection"/>
        <link href="newdesign/css/layout.css" type="text/css" rel="stylesheet" media="screen,projection"/>
        <link href="newdesign/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
        <!--  Scripts-->
        <script src="newdesign/js/jquery-2.1.1.min.js"></script>
        <script src="newdesign/js/materialize.min.js"></script>
        <script src="js/moment-with-locales.js"></script>
        <script src="newdesign/js/bootstrap-datetimepicker.js"></script>
        <script src="newdesign/js/jquery.selectBox.js"></script>
        <script src="newdesign/js/prism.js"></script>
        <script src="newdesign/js/init.js"></script>

        <script src="//cdn.firebase.com/js/client/2.2.9/firebase.js"></script>
        <script src="js/lodash.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.16/angular.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.16/angular-cookies.min.js"></script>
        <script src="//cdn.firebase.com/libs/angularfire/1.1.2/angularfire.js"></script>
        <script src="js/rsvp.js"></script>
        <script src="js/geofire.js"></script>
        <script src="js/angular-materialize.js"></script>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDqyBR4bu0xg0l9ypkVNs61agcZ14eAJN4"></script>

        <script src="js/app.js"></script>
        <script src="js/app/directives.js"></script>
        <script src="js/app/directives/dateTimePicker.js"></script>
        <script src="js/app/directives/localMeetings.js"></script>
        <script src="js/app/directives/starsRating.js"></script>
        <script src="js/app/services.js"></script>
        <script src="js/app/services/appConfig.js"></script>
        <script src="js/app/services/dataProvider.js"></script>
        <script src="js/app/services/dialogs.js"></script>
        <script src="js/app/services/geoLocation.js"></script>
        <script src="js/app/services/localMeeting.js"></script>
        <script src="js/app/services/localMeetingsInfo.js"></script>
        <script src="js/app/services/meeting.js"></script>
        <script src="js/app/services/modal.js"></script>
        <script src="js/app/services/user.js"></script>
        <script src="js/app/filters/customFilters.js"></script>
        <script src="js/app/services/session.js"></script>
        <script src="js/app/services/userGroupBuilder.js"></script>
        <script src="js/app/services/util.js"></script>
        <script src="js/app/controllers.js"></script>
        <script src="js/app/controllers/authModal.js"></script>
        <script src="js/app/controllers/locationMap.js"></script>
        <script src="js/app/controllers/userAccount.js"></script>
        <script src="js/app/controllers/userMeetingPlaces.js"></script>
        <script src="js/app/controllers/userMeetingTimes.js"></script>
        <script src="js/app/controllers/meetingUserInfo.js"></script>
        <script src="js/app/controllers/snippet.js"></script>
        <script src="js/app/controllers/meeting.js"></script>
    </head>
<body>
    <div id="google-tag" ng-controller="Snippet">
        <div ng-bind-html="getGoogleTag()"></div>
        <div ng-bind-html="getFacebookSDK()"></div>
        <div ng-bind-html="getTwitterSDK()"></div>
    </div>
    <div id="container">
        <header>
            <nav id="header" class="top-nav">
                <h1 id="logo"><a href="/">Socailivo</a></h1>
                <div id="top-right" class="pull-right">
<!--                    <div class="notifications">
                        <a class="dropdown-button info" href="#" data-activates="notifications-info" title="Notifications">
                            <i class="icon"></i><span class="alert-bubble">123</span>
                        </a>
                        <div id="notifications-info" class="dropdown-content">
                            <p class="notifLabel">Notifications</p>
                            <ul>
                                <li><a>All caught up!</a></li>
                            </ul>
                            <span class="icon arow"></span>
                        </div>
                    </div>-->
                    <div class="account" ng-controller="UserAccountController">
                        <div class="user-link" ng-if="!isAuthenticated">
                                <a class="btn btn-flat waves-effect waves-ripple modal-trigger" ng-click="login()">
                                    <i class="fa fa-user"></i> Login/Signup
                                </a>
                        </div>
                        <div ng-if="isAuthenticated">
                            <a class="dropdown-button info" href="javascript:void(0)" data-activates="account-info" data-hover="true" dropdown>
                                <span class="thumb"><img ng-src="{{ user.getProfileImageURL() }}" alt=""></span>
                                <span class="name">
                                    {{ user.fullName }}<i class="icon"></i>
                                </span>
                            </a>
                            <div id="account-info" class="dropdown-content">
                                <ul>
                                    <!--<li><a href="#none">Profile</a></li>-->
                                    <!--<li><a href="#none">Settings</a></li>-->
                                    <li><a ng-click="logout()">Log out</a></li>
                                </ul>
                                <span class="icon arow"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="container"><a href="#" data-activates="nav-mobile" class="button-collapse top-nav waves-effect waves-light circle hide-on-large-only"><i class="mdi-navigation-menu"></i></a></div>
            <ul id="nav-mobile" class="side-nav fixed">
                <li class="active"><a href="index.html" class="waves-effect waves-ripple"><span class="icon icon-home"></span>Home</a></li>
				<li><a href="create_new_meeting.html" class="waves-effect waves-ripple"><span class="icon icon-new"></span>New Meet</a></li>
                <!--<li><a href="#none" class="waves-effect waves-ripple"><span class="icon icon-history"></span>History</a></li>-->
            </ul>
        </header><!--//header-->
        <div id="contents" ng-controller="meetingController">
            <div class="row contents">
                <div id="contLeft" class="col l9 s12">
                    <div class="box-meeting">
                        <h2 class="title-page"><span class="icon"></span>{{ meeting.name }}</h2>
                        <div class="wrap">
                            <div class="group" ng-if="userGroups.groups.length">
                                <h3 class="title">Group that suits you:</h3>
                                <div class="box-gray" ng-repeat="group in userGroups.groups">
                                    <h4 class="location">
                                        <span class="icon"></span>
                                        <span class="subtext">At:</span> {{ group.where.name }} {{getMeetingLocation(group.where)}}
                                    </h4>
                                    <div class="box-white white">
                                        <span class="time">Start: <b class="red-text">{{ group.when.formatted }}</b></span>
                                        <a class="btn waves-effect waves-light" ng-click="joinGroup(group)">{{ group.hasJoined(currentUser.id) ? 'Leave' : 'RSVP' }}</a>
                                    </div>
                                    <p>{{ group.users.length }} people have chosen:</p>
                                    <ul class="have-chosen">
                                        <li class="memberLabel" ng-class="group.hasJoined(user.user.id) ? 'cfrmed' : 'not-cfrm'" ng-repeat="user in group.users">
                                            <i class="icon"></i>{{ user.user.fullName }} <span ng-if="needsGroupUserDetails(userGroups, user)">(you)</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="choose-setting" ng-if="usersInfo.current">
                                <div class="member">
                                    <div class="thumb"><img ng-src="{{ usersInfo.current.user.getProfileImageURL() }}" alt=""></div>
                                    <p><b>{{ usersInfo.current.user.user.fullName }}</b><br>
                                        <b>Your Location:</b> {{ usersInfo.current.user.getLocationName() }} (<a ng-click="changeLocation()">change</a>)</p>
                                </div>
                                <div class="box-gray">
                                    <p>Places?</p>
                                    <div class="box-white white">
                                        <ul class="choose-list">
                                            <li ng-class="where.selected ? 'selected' : ''" ng-repeat="where in usersInfo.current.where" ng-click="addPlace(where)">
                                                <a class="icon" title="Delete" ng-click="removePlace($event, where)">Delete</a>
                                                {{ where.name }}
                                            </li>
                                            <li class="forbtn"><a class="btn btn-add waves-effect waves-light" ng-click="addPlaces()"><i class="icon"></i> Add</a></li>
                                        </ul>
                                    </div>
                                    <p>Times?</p>
                                    <div class="box-white white">
                                        <ul class="choose-list">
                                            <li ng-class="when.selected ? 'selected' : ''" ng-repeat="when in usersInfo.current.when" ng-click="addTime($event, when)">
                                                <a class="icon" title="Delete" ng-click="removeTime(when)">Delete</a>
                                                {{ when.whenFormatted }}
                                            </li>
                                            <li class="forbtn"><a class="btn btn-add waves-effect waves-light" ng-click="addTimes()"><i class="icon"></i> Add</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="other-member">
                                <h3 class="title">
                                    <span ng-show="usersInfo.count == 1">1 person is participating in this event</span>
                                    <span ng-show="usersInfo.count > 1">{{ usersInfo.count }} people are participating in this event:</span>
                                </h3>
                                <ul class="list">
                                    <li ng-repeat="(userId, userInfo) in usersInfo.others">
                                        <div class="thumb"><img ng-src="{{ userInfo.user.getProfileImageURL() }}" alt=""></div>
                                        <p><b>{{ userInfo.user.user.fullName }}</b></p>
                                        <p class="subtext">Location: {{ userInfo.user.getLocationName() }} </p>
                                        <p class="link"><a ng-click="showUserInfo(userInfo)">View Detail &raquo;</a></p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="share" ng-if="usersInfo.current">
                        <div class="label">Share via socials </div>
                        <div class="fb-share-button" data-href="{{ getSharingUrl() }}" data-layout="button"></div>
                        <div class="twitter-share">
                            <a href="https://twitter.com/share" class="twitter-share-button" data-text="{{getShareEmailSubject()}}" data-url="{{ getSharingUrl() }}" data-count="none">Tweet</a>
                        </div>
                        <div class="email-share">
                            <a href="mailto:?subject={{getShareEmailSubject() | escape}}&body={{getSharingUrl() | escape}}" title="Send an email"><img src="newdesign/image/icon-m.gif" alt="Send an email"></a>
                        </div>
                        <div style="clear:both;"></div>
                        <p>or give friends the link</p>
                        <div class="url" style="height:66px;">
                            <a href="{{ getSharingUrl() }}">
                                <textarea class="link" id="sharing_url" style="cursor: pointer; border:none; outline: none; resize:none;">{{ getSharingUrl() }}</textarea>
                            </a>
                            <a class="btn waves-effect waves-light" ng-click="copy()">Copy</a>
                        </div>
                    </div>
                </div>
                <div id="contRight" class="col l3 s12">
                    <local-meetings location="currentUser.user.location.coords" radius="currentUser.user.location.radius" exclude-meeting="{{ meeting.id }}" count="3"></local-meetings>
                </div>
            </div>
        </div><!--//contents-->
        <footer class="page-footer white">
            <div class="social">
                <span class="title">FOLLOW US</span>
                <ul>
                    <li class="fb"><a class="icon waves-effect waves-light" href="#none" title="Facebook">Facebook</a></li>
                    <li class="youtube"><a class="icon waves-effect waves-light" href="#none" title="Youtube">Youtube</a></li>
                    <li class="twitter"><a class="icon waves-effect waves-light" href="#none" title="Twitter">Twitter</a></li>
                    <li class="google-plus"><a class="icon waves-effect waves-light" href="#none" title="Google Plus">Google Plus</a></li>
                    <li class="linkedin"><a class="icon waves-effect waves-light" href="#none" title="Linkedin">Linkedin</a></li>
                </ul>
            </div>
            <div class="copyright">© Socialivo - All rights reserved.</div>
        </footer><!--//footer-->
    </div>
</body>
</html>
